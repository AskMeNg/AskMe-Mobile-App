var flightSearch=angular.module("flightSearch",[]);flightSearch.controller("flightSearch",["$scope","searchData",function(t,e){t.child_no=0,t.adult_no=1,t.senior_no=0,t.infant_no=0,t.getData=e.data(),$(".flight_complete").autocomplete({source:"server/flight_autocomplete.php",minLength:3,select:function(e,a){var n=a.item.id[0],o=a.item.value;"#"!=n&&($f_des_air="LHR",$sour=$(this).attr("name"),"dep"==$sour?(t.dep_airp_code=n,t.dep_airp_name=o,t.getData[0].fDepAirpCode=n,t.getData[0].fDepAirpName=o):(t.des_airp_code=n,t.des_airp_name=o,t.getData[0].fDesAirpCode=n,t.getData[0].fDesAirpName=o))},html:!0,open:function(){jQuery(".ui-autocomplete").css("z-index",1e3)}}),$tday=moment().format("DD/MMMM/YYYY"),t.d_checkin=moment().format("YYYYMMDD"),t.getData[0].fDepDate=t.d_checkin,t.getData[0].fDepDateLong=moment().format("ddd Do, MMM, YYYY"),$t=$tday.split("/"),t.f_day=$t[0],t.f_month=$t[1],t.f_year=$t[2],$nextday=moment().add("days",1).format("DD/MMMM/YYYY"),t.d_checkout=moment($nextday).format("YYYYMMDD"),t.getData[0].fDesDate=t.d_checkin,t.getData[0].fDesDateLong=moment().format("ddd Do, MMM, YYYY"),$n=$nextday.split("/"),t.t_day=$n[0],t.t_month=$n[1],t.t_year=$n[2],t.setfromdate=function(){$("#d_date").focus()},t.settodate=function(){$("#r_date").focus()},t.get_days=function(){var e=moment(t.d_checkin),a=moment(t.d_checkout),n=a.diff(e,"days");return t.d_nights=n,console.log(n),n},t.addFlyer=function(e){0==e&&(t.adult_no++,t.getData[0].fAdult=t.adult_no),1==e&&(t.child_no++,t.getData[0].fChild=t.child_no),2==e&&(t.senior_no++,t.getData[0].fSenior=t.senior_no),3==e&&(t.infant_no++,t.getData[0].fInfant=t.infant_no)},t.removeFlyer=function(e){0==e&&t.adult_no>1&&(t.adult_no--,t.getData[0].fAdult=t.adult_no),1==e&&t.child_no>0&&(t.child_no--,t.getData[0].fChild=t.child_no),2==e&&t.senior_no>0&&(t.senior_no--,t.getData[0].fSenior=t.senior_no),3==e&&t.infant_no>0&&(t.infant_no--,t.getData[0].fInfant=t.infant_no)}}]),flightSearch.directive("dateFrom",function(){return function(t,e){e.datepicker({defaultDate:"+1w",dateFormat:"dd/MM/yy",minDate:0,changeMonth:!0,numberOfMonths:3,onClose:function(e){var a=$(this).datepicker("getDate");a&&a.setDate(a.getDate()+1),$("#r_date").datepicker("option","minDate",a||1);var n=e.split("/");t.f_day=n[0],t.f_month=n[1],t.f_year=n[2],t.getData[0].fDepDate=moment(e).format("YYYYMMDD"),t.getData[0].fDepDateLong=moment(e).format("ddd Do, MMM, YYYY"),t.d_checkin=moment(e).format("YYYY-MM-DD"),$num=t.get_days(),t.getData[0].fTravelDays=$num,t.$apply(),$("#r_date").focus()}})}}),flightSearch.directive("dateTo",function(){return function(t,e){e.datepicker({dateFormat:"dd/MM/yy",changeMonth:!0,numberOfMonths:3,onClose:function(e){$("#d_date").datepicker("option","maxDate",e);var a=e.split("/");t.t_day=a[0],t.t_month=a[1],t.t_year=a[2],t.getData[0].fDesDate=moment(e).format("YYYYMMDD"),t.getData[0].fDesDateLong=moment(e).format("ddd Do, MMM, YYYY"),t.d_checkout=moment(e).format("YYYY-MM-DD"),$num=t.get_days(),t.getData[0].fTravelDays=$num,t.$apply()}})}});