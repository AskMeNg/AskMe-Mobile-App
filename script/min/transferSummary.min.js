var transferSummary=angular.module("transferSummary",["angular.filter","ui.bootstrap"]);transferSummary.directive("onFinishRender",function(e){return{restrict:"A",link:function(r){r.$last===!0&&e(function(){r.$emit("ngRepeatFinished")})}}}),transferSummary.controller("transferSummary",["$scope","searchData","transferData","purchaseData","serviceAddRs","userData","$location",function(e,r,t,a,n,s,i){e.getData=r.data(),e.getTransfer=t.data(),console.log(e.getTransfer),e.adultGuest=e.getTransfer[1][0],e.transInfo=e.getTransfer[0],e.purchaseD=a.data(),e.purchaseT="none",null!=e.purchaseD[0]&&(e.purchaseT=e.purchaseD[0]["@purchaseToken"]),e.tservAdd=n.get({pToken:e.purchaseT,Guest:JSON.stringify(e.getTransfer[1]),Availtoken:e.getTransfer[0]["@availToken"],contractName:e.getTransfer[0].ContractList.Contract.Name,contractCode:e.getTransfer[0].ContractList.Contract.IncomingOffice["@code"],ServiceType:"ServiceTransfer",TransferType:"IN",DateFrom:e.getTransfer[0].DateFrom["@date"],DateFTime:e.getTransfer[0].DateFrom["@time"],currency:e.getTransfer[0].Currency["@code"],code:e.getTransfer[0].TransferInfo.Code,codeType:e.getTransfer[0].TransferInfo.Type["@code"],VType:e.getTransfer[0].TransferInfo.VehicleType["@code"],tourAdult:e.getTransfer[0].Paxes.AdultCount,tourChild:e.getTransfer[0].Paxes.ChildCount,destLoc:e.getTransfer[0].DestinationLocation.Code,DesType:e.getData[9].valueCountry,pickLoc:e.getTransfer[0].PickupLocation.Code,picType:e.getData[6].valueCountry,tourBreakDown:JSON.stringify(e.getData[28])},function(){function r(){Array.isArray(e.travelers)?"CH"!=e.travelers[n]["@type"]?e.lead={user:e.travelers[0].CustomerId+"|"+e.adultGuest[0][0]}:(n++,r()):"CH"!=e.travelers["@type"]?e.lead={user:e.travelers.Customer.CustomerId+"|"+e.adultGuest[0]}:(n++,r())}if(e.AddedtransferServRs=e.tservAdd.ServiceAddRS.Purchase,e.service=e.AddedtransferServRs.ServiceList.Service,null!=e.purchaseD[0]){var t=e.service.length;e.service=e.service[t-1]}console.log(e.service),a.setData(e.AddedtransferServRs),e.travelers=e.service.Paxes.GuestList;var n=0;r(),e.cancel_policies=e.AddedtransferServRs.ServiceList.Service.CancellationPolicies.CancellationPolicy,e.modify_policies=e.AddedtransferServRs.ServiceList.Service.ModificationPolicyList.ModificationPolicy,e.max_wait_time_dom=e.AddedtransferServRs.ServiceList.Service.TransferInfo.TransferSpecificContent.MaximumWaitingTimeSupplierDomestic["@time"],e.max_wait_time_int=e.AddedtransferServRs.ServiceList.Service.TransferInfo.TransferSpecificContent.MaximumWaitingTimeSupplierInternational["@time"],e.reserve_rules=e.AddedtransferServRs.ServiceList.Service.TransferInfo.TransferSpecificContent.GenericTransferGuidelinesList.TransferBulletPoint,e.info=e.AddedtransferServRs.ServiceList.Service.TransferPickupInformation.Description}),e.next=function(r,t){e.getTransfer.push(t.user),i.path(r)}}]),transferSummary.controller("paymentDialog",function(e,r){e.makePayment=function(){console.log("I was here");r.open({templateUrl:"makePayment.html",controller:"ModalpaymentCtrl",size:"lg",resolve:{transfer:function(){return e.transfer}}})}}),transferSummary.controller("ModalpaymentCtrl",["$scope","tourpConfirmRs","purchaseData","$modalInstance",function(e,r,t,a){e.temp_getTransfer=[],e.selectedTour=[],e.checktransfer=[],e.adult_sel=1,e.child_sel=2,e.ok=function(){e.getSelected=t.data(),console.log(e.getSelected),e.tpurchaseConf=r.get({ptoken:e.getSelected[0]["@purchaseToken"],SerSpui:e.getSelected[0].ServiceList.Service["@SPUI"]},function(){e.AddedServRs=e.hpurchaseConf,console.log(e.AddedServRs),t.setData(e.AddedServRs)}),a.close()},e.cancel=function(){a.dismiss("cancel")}}]);