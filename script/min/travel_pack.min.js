var TravelPack=angular.module("TravelPack",["angular.filter","ui.bootstrap"]);TravelPack.directive("onFinishRender",function(t){return{restrict:"A",link:function(a){a.$last===!0&&t(function(){a.$emit("ngRepeatFinished")})}}}),TravelPack.controller("TravelPack",["$scope","searchData","flightData","hotelData","purchaseData","travelPackD","flightCheckRs","$location",function(t,a,e,r,o,l,i){function n(a){for(t.flightD=[],t.hotelD=[],t.totalPrice=0,$i=0;$i<a.length;$i++)"Sabre"==a[$i].product&&"Flight"==a[$i].productType&&(""==e.data()?t.fCheck=i.get({fAdult:a[$i].fAdult,fChild:a[$i].fChild,fSenior:a[$i].fSenior,fInfant:a[$i].fInfant,fOfferCode:a[$i].fOfferCode},function(){t.check=t.fCheck.response,t.flightD.push(t.check)}):t.flightD=e.data(),t.totalPrice=parseFloat(t.totalPrice)+parseFloat(a[$i].hPrice)),"Hotelbeds"==a[$i].product&&"Hotel"==a[$i].productType&&(""==r.data()?t.hotelD.push(a[$i]):t.hotelD.push(a[$i]),t.totalPrice=parseFloat(t.totalPrice)+parseFloat(a[$i].hPrice))}function s(t){for(var a=t+"=",e=document.cookie.split(";"),r=0;r<e.length;r++){var o=e[r].trim();if(0==o.indexOf(a))return o.substring(a.length,o.length)}return""}t.travelPD=l.data(),t.travelPD.length<1?(t.cc=s("travelPD"),""!=t.cc&&(t.travelPD=JSON.parse(s("travelPD")),console.log(t.travelPD),n(t.travelPD))):n(t.travelPD)}]),TravelPack.controller("TPfList",["$scope","searchData","flightListRs",function(t,a,e){t.getData=a.data(),t.offer="",t.fList=e.get({fAdult:t.getData[0].fAdult,fChild:t.getData[0].fChild,fSeniors:t.getData[0].fSenior,fInfant:t.getData[0].fInfant,fDepCode:t.getData[0].fDepCode,fDesCode:t.getData[0].fDesCode,fTravelDays:t.getData[0].fTravelDays,fDepDate:t.getData[0].fDepDate},function(){t.list=t.fList.response.ofr,console.log(t.list)})}]),TravelPack.controller("TPhList",["$scope","searchData","hotelData","hotelListRs",function(t,a,e,r){t.getData=a.data(),t.offer="",t.hList=r.get({hAdult:t.getData[17].valueData,hChild:t.getData[18].valueData,hDesCode:t.getData[20].valueData,hcheckin:t.getData[22].valueData,hcheckout:t.getData[23].valueData,hRoomBreakDown:JSON.stringify(t.getData[27])},function(){t.hotels_total=t.hList.HotelValuedAvailRS["@totalItems"],t.hotels=t.hList.HotelValuedAvailRS.ServiceHotel})}]),TravelPack.controller("TPtList",["$scope","searchData","tourData","tourListRs",function(t,a,e,r){function o(){t.tList=r.get({hDesCode:t.getData[20].valueData,hTourin:t.getData[22].valueData,hTourout:t.getData[23].valueData,tourBreakDown:JSON.stringify(t.getData[28])},function(){t.tours_p=t.tList.TicketAvailRS,t.tours_total=t.tours_p["@totalItems"],console.log(t.tList),t.tours=t.tours_p.ServiceTicket,t.getData[26].availToken=t.tours[0]["@availToken"]})}t.getData=a.data(),t.getTour=e.data(),t.tourlist=[],t.offer="",o()}]),TravelPack.controller("TPtrList",["$scope","searchData","transferData","transferListRs","transferServiceAddRs","$location",function(t,a,e,r){function o(){t.tList=r.get({hDesCode:t.getData[5].valueData,hDesType:t.getData[6].valueCountry,hReturnCode:t.getData[8].valueData,hReturnType:t.getData[9].valueCountry,hReturnOption:t.getData[9].valueName,htransferin:t.getData[22].valueData,htransferout:t.getData[23].valueData,ttransferin:t.getData[22].valueName,ttransferout:t.getData[23].valueName,transferBreakDown:JSON.stringify(t.getData[28])},function(){t.transfers_p=t.tList.TransferValuedAvailRS,t.transfers_total=parseInt(t.transfers_p["@totalItems"]),console.log(t.tList),t.transfers=t.transfers_p.ServiceTransfer,0!=t.transfers_total&&(t.getData[26].availToken=t.transfers[0]["@availToken"])})}for(t.getData=a.data(),t.transferlist=e.data(),t.offer="",t.guest=[[],[]],t.selecV=!1,t.adult=t.getData[28][0],t.children=t.getData[28][1].length;t.guest[0].push([])<t.adult;);if(t.children>0)for(;t.guest[1].push([])<t.children;);o()}]);