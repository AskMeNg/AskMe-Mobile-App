var hotelDetails=angular.module("hotelDetails",["angular.filter","ui.bootstrap"]);hotelDetails.directive("onFinishRender",function(o){return{restrict:"A",link:function(t){t.$last===!0&&o(function(){t.$emit("ngRepeatFinished")})}}}),hotelDetails.controller("hotelDetails",["$scope","searchData","hotelData","hotelDetailsRs",function(o,t,e,a){function l(){for(o.totalPrice=0,$i=1;$i<o.roomTotalPrice.length;$i++)o.totalPrice=parseFloat(o.totalPrice)+parseFloat(o.roomTotalPrice[$i]);o.roomTotalPrice[0]=o.totalPrice.toFixed(3)}function r(t,e,a,l){var n=[];for(var c in t)if(t.hasOwnProperty(c)&&"object"==typeof t[c])try{t[c].Board.$==e&&t[c].RoomType.$==a?(console.log(t[c]),t.HotelOccupancy.Occupancy.AdultCount==o.getData[27][l][1]&&t.HotelOccupancy.Occupancy.ChildCount==o.getData[27][l][2].length?n.push(t):n=n.concat(r(t[c],e,a,l))):n=n.concat(r(t[c],e,a,l))}catch(i){n=n.concat(r(t[c],e,a,l))}return n}for(o.getData=t.data(),o.getSelected=e.data(),o.room_categories=o.getSelected[0].AvailableRoom,o.total_rooms=o.getData[19].valueData,o.roomTotalPrice=[0,0,0,0,0,0,0],o.roomBreak=[],o.selectedRoomCombo=[],o.totalPrice=0,o.att=[],o.guest=[[[],[]],[[],[]],[[],[]],[[],[]],[[],[]],[[],[]]],o.getSelected.push([]),o.hDetail=a.get({hotelCode:o.getData[26].hotelCode},function(){o.hotel_Detail=o.hDetail,o.mainImageUrl=o.hotel_Detail.details[0].img_path,o.getData[26].imgUrl=o.mainImageUrl}),console.log(o.getSelected),o.board="",o.roomtype="",o.setImage=function(t){o.mainImageUrl=t},o.room_allo=[];o.room_allo.push([])<o.total_rooms;);for(;o.roomBreak.push([])<o.total_rooms;);for($i=0;$i<o.total_rooms;$i++){var n=0;for(property in o.room_categories)if(o.room_categories.hasOwnProperty(property)){if(o.room_categories instanceof Array)var c=o.room_categories[property];else var c=o.room_categories;var i=c.HotelOccupancy.Occupancy;if(i.AdultCount==o.getData[27][$i][1]&&i.ChildCount==o.getData[27][$i][2].length&&(o.room_allo[$i].push(c),console.log(o.room_allo),n++,1==n)){o.roomTotalPrice[$i+1]=c.HotelRoom.Price.Amount;var s=[];s.push(c),o.roomBreak[$i]=s,console.log(o.roomBreak[$i])}}}l(),$("#right_th").click(function(){$fer=70*$(".hthumb").last().attr("name")-420,console.log($fer),$lef=Math.abs(parseInt($("#thumb_load").css("left"))),console.log($lef),$fer>=$lef?$("#thumb_load").animate({left:"-=70"},{duration:1e3,queue:!1}):$("#right_th").fadeOut(),$lef>-10&&$("#left_th").fadeIn()}),$("#left_th").click(function(){$lef=parseInt($("#thumb_load").css("left")),$lef>-80?$("#left_th").fadeOut():$("#right_th").fadeIn(),$("#thumb_load").animate({left:"+=70"},{duration:1e3,queue:!1})}),o.room_book=function(){$(".hotel_room").animate({top:"-250px"})},console.log(o.room_allo),console.log(o.getSelected),console.log(o.roomTotalPrice);o.$on("ngRepeatFinished",function(){$(".scroller_container").jScrollPane(),$(".hot_container").jScrollPane()}),o.get_room_type=function(t,e,a){o.roomtype=t,o.board=e,o.att=r(o.room_allo,o.board,o.roomtype,a),o.roomBreak[a]=o.att,console.log(o.roomBreak),o.roomTotalPrice[a+1]=o.att[0].HotelRoom.Price.Amount,l()},o.get_room_board=function(t,e,a){o.roomtype=t,o.board=e,o.att=r(o.room_allo,o.board,o.roomtype,a),o.roomBreak[a]=o.att,console.log(o.roomBreak),o.roomTotalPrice[a+1]=o.att[0].HotelRoom.Price.Amount,l()},o.insert_room=function(){e.addData(o.roomBreak)}}]),hotelDetails.controller("AddGuestCtrl",function(o,t){o.open=function(e,a,l){for(console.log(l),o.index=l;o.guest[l][0].push([])<e;);if(a>0)for(;o.guest[l][1].push([])<a;);console.log(o.guest);t.open({templateUrl:"add_hotel_guest.html",controller:"hotelModalInstanceCtrl",size:"sm",resolve:{guest:function(){return o.guest},index:function(){return o.index}}})}}),hotelDetails.controller("hotelModalInstanceCtrl",["$scope","hotelData","$modalInstance","guest","index",function(o,t,e,a,l){o.guest=a[l],console.log(o.guest),o.ok=function(){o.getSelected=t.data(),o.getSelected[1].push(o.guest),console.log(o.getSelected[1]),e.close(o.guest)},o.cancel=function(){e.dismiss("cancel")}}]);