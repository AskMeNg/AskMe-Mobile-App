var hotelSearch=angular.module("hotelSearch",[]);hotelSearch.controller("hotelSearch",["$scope","searchData","$location",function(t,o,e){t.room=[[1,1,[]],[0,0,[]],[0,0,[]],[0,0,[]],[0,0,[]],[0,0,[]]],t.rooms=[],t.t_num_days="01",t.nights="night",t.room_num=0,t.hotelSearchf={destination:""},t.getData=o.data(),$("#hotel_complete").autocomplete({source:"server/hotel_autocomplete.php",minLength:3,select:function(o,e){var a=e.item.id,n=e.item.value;"#"!=a&&(t.getData[1].hdescode=a,t.getData[1].hdesdesc=n)},html:!0,open:function(){jQuery(".ui-autocomplete").css("z-index",1e3)}}),$tday=moment().format("DD/MMMM/YYYY"),$t=$tday.split("/"),t.f_day=$t[0],t.f_month=$t[1],t.f_year=$t[2],$nextday=moment().add(1,"days").format("DD/MMMM/YYYY"),$n=$nextday.split("/"),t.t_day=$n[0],t.t_month=$n[1],t.t_year=$n[2],t.room_num_2="false",t.room_num_3="false",t.room_num_4="false",t.room_num_5="false",t.room_num_6="false",t.room_plus=function(){t.room_no=t.rooms.length+2,t.room_num++,t.getData[1].hTotalroom=t.room_num,t.rooms.push({adultid:"adult"+t.room_no,childid:"child"+t.room_no,label:"Room "+t.room_no,room_no:t.room_no-1})},t.room_minus=function(){$index=t.rooms.length-1,t.rooms.splice($index,1),t.room_num--,t.getData[1].hTotalroom=t.room_num,t.addscroller()},t.setfromdate=function(){$("#check_in").focus()},t.settodate=function(){$("#check_out").focus()},t.get_days=function(){var o=moment(t.d_checkin),e=moment(t.d_checkout),a=e.diff(o,"days");return t.getData[1].htotalnight=a,10>a&&a>=1&&(a="0"+a),t.nights=a>1?"nights":"night",t.d_nights=a,a},t.setroom=function(){t.hotelSearchf.$valid&&(t.getData[1].hRoomBreak=t.room,e.path("/hotel/hotel_list"))}}]),hotelSearch.directive("hdateFrom",function(){return function(t,o){o.datepicker({defaultDate:"+1w",dateFormat:"dd/MM/yy",minDate:0,changeMonth:!0,numberOfMonths:3,onClose:function(o){var e=$(this).datepicker("getDate");e&&e.setDate(e.getDate()+1),$("#check_out").datepicker("option","minDate",e||1);var a=o.split("/");t.f_day=a[0],t.f_month=a[1],t.f_year=a[2],t.getData[1].hcheckin=moment(o).format("YYYYMMDD"),t.getData[1].hcheckinL=moment(o).format("ddd Do, MMM, YYYY"),t.d_checkin=moment(o).format("YYYY-MM-DD"),$num=t.get_days(),t.t_num_days=$num,t.$apply(),$("#check_out").focus()}})}}),hotelSearch.directive("hdateTo",function(){return function(t,o){o.datepicker({dateFormat:"dd/MM/yy",changeMonth:!0,numberOfMonths:3,onClose:function(o){$("#check_in").datepicker("option","maxDate",o);var e=o.split("/");t.t_day=e[0],t.t_month=e[1],t.t_year=e[2],t.getData[1].hcheckout=moment(o).format("YYYYMMDD"),t.getData[1].hcheckoutL=moment(o).format("ddd Do, MMM, YYYY"),t.d_checkout=moment(o).format("YYYY-MM-DD"),$num=t.get_days(),t.t_num_days=$num,t.$apply()}})}});