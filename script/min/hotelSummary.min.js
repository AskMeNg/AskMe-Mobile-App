var HotelSummary=angular.module("HotelSummary",["angular.filter","ui.bootstrap"]);HotelSummary.directive("onFinishRender",function(e){return{restrict:"A",link:function(t){t.$last===!0&&e(function(){t.$emit("ngRepeatFinished")})}}}),HotelSummary.controller("HotelSummary",["$scope","searchData","hotelData","serviceAddRs","purchaseData","$location",function(e,t,a,o,l,s){e.getData=t.data(),e.getSelected=a.data(),e.guests=e.getSelected[1],e.room=e.getData[19].valueData,e.cancel_policies=null,e.allg=[],e.lead={user:e.guests[0][0][0]},e.room_count=e.room>1?"other":"one",e.purchaseD=l.data(),e.purchaseT="none",null!=e.purchaseD[0]&&(e.purchaseT=e.purchaseD[0]["@purchaseToken"]),console.log(e.getSelected),console.log(e.lead.user),e.hservAdd=o.get({pToken:e.purchaseT,Availtoken:e.getSelected[0]["@availToken"],contractName:e.getSelected[0].ContractList.Contract.Name,contractCode:e.getSelected[0].ContractList.Contract.IncomingOffice["@code"],Guest:JSON.stringify(e.getSelected[1]),bookData:JSON.stringify(e.getSelected[2]),DateFrom:e.getData[22].valueData,ServiceType:"ServiceHotel",DateTo:e.getData[23].valueData,hotelcode:e.getData[26].hotelCode,destcode:e.getData[20].valueData},function(){function t(){if(Array.isArray(e.hotelguest)){for($k=0;$k<e.hotelguest.length;$k++)e.allg.push(e.hotelguest[$k].HotelOccupancy.Occupancy.GuestList.Customer);for(e.guestlist=e.hotelguest[0].HotelOccupancy.Occupancy.GuestList.Customer,$a=0;$a<e.guestlist.length;$a++)"CH"!=e.guestlist[$a]["@type"]&&(e.lead={user:e.guestlist[$a].CustomerId+"|"+e.guestlist[$a].Name+" "+e.guestlist[$a].LastName},$a=e.guestlist.length)}else for(e.guestlist=e.hotelguest.HotelOccupancy.Occupancy.GuestList.Customer,e.allg.push(e.guestlist),$a=0;$a<e.guestlist.length;$a++)"CH"!=e.guestlist[$a]["@type"]&&(e.lead={user:e.guestlist[$a].CustomerId+"|"+e.guestlist[$a].Name+" "+e.guestlist[$a].LastName},$a=e.guestlist.length)}if(e.AddedServRs=e.hservAdd.ServiceAddRS.Purchase,e.service=e.AddedServRs.ServiceList.Service,null!=e.purchaseD[0]){var a=e.service.length;e.service=e.service[a-1],console.log("in here")}console.log(e.AddedServRs),l.setData(e.AddedServRs),e.cancel_policies=e.service.AvailableRoom,e.totalAmount=e.service.TotalAmount,e.hotelguest=e.service.AvailableRoom,t()}),e.next=function(t,a){e.getSelected.push(e.allg),e.getSelected.push(a.user),console.log(a.user),console.log(e.getSelected),s.path(t)}}]),HotelSummary.controller("AddRoomCommentCtrl",function(e,t){e.open=function(a){console.log(a),e.index=a;t.open({templateUrl:"add_hotel_comment.html",controller:"hotelCommentInstanceCtrl",size:"sm",resolve:{index:function(){return e.index}}})}}),HotelSummary.controller("hotelCommentInstanceCtrl",["$scope","hotelData","$modalInstance","index",function(e,t,a,o){e.com=angular.copy(e.master),e.ok=function(l){e.getSelected=t.data(),e.getSelected[1][o].push(l.comment),console.log(e.getSelected[1]),a.close(l.comment)},e.cancel=function(){a.dismiss("cancel")}}]);